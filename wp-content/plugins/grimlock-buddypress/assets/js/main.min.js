(()=>{"use strict";jQuery((function(e){var t,s,a,i,n=e("#buddypress div.profile-content__nav-wrapper"),o=e("#buddypress div.profile-content__nav-wrapper .priority-ul"),r=e("#buddypress div.profile-content__nav-wrapper .settings-nav");if(n.length&&o.length){const h=e("body").hasClass("grimlock-buddypress--profile-nav-mobile-default-state-open")?"show":"";var l=e('<li class="nav__dropdown-wrapper d-none priority-nav__wrapper" aria-haspopup="true"><button aria-controls="menu" type="button" class="nav__dropdown-toggle priority-nav__dropdown-toggle"><i class="fa fa-ellipsis-v"></i></button><ul aria-hidden="true" class="nav__dropdown priority-nav__dropdown '+h+'"></ul></li>');o.append(l);var d=l.find(".nav__dropdown"),c=l.find(".nav__dropdown-toggle");c.on("click",(function(){e(this).siblings("ul").toggleClass("show").hasClass("show")?document.cookie="grimlock_buddypress_profile_nav_mobile_state=open; path=/;":document.cookie="grimlock_buddypress_profile_nav_mobile_state=closed; path=/;"}));var p=function(){if(n.length&&o.length){if(e(window).outerWidth()<=768)return d.prepend(o.children("li:not(.nav__dropdown-wrapper)")),void(c.find("i").length&&c.html(grimlock_buddypress.priority_nav_dropdown_breakpoint_label));c.find("i").length||l.find(".nav__dropdown-toggle").html('<i class="fa fa-ellipsis-v"></i>'),l.hasClass("d-none")&&l.removeClass("d-none").addClass("d-inline-block");for(var t=Math.floor(n.width()-(r.length?r.outerWidth():0)),s=Math.ceil(o.outerWidth());d.children().length&&t>s;)d.children().first().insertBefore(o.children().last()),s=Math.ceil(o.outerWidth());for(;o.children().length>1&&t<=s;)n.find(".nav__dropdown").prepend(o.children().eq(-2)),s=Math.ceil(o.outerWidth());!d.children().length&&l.hasClass("d-inline-block")&&l.removeClass("d-inline-block").addClass("d-none")}};setTimeout(p,100);e(window).on("resize",(t=p,s=20,function(){var e=this,n=arguments;function o(){a||t.apply(e,n),i=null}i?clearTimeout(i):a&&t.apply(e,n),i=setTimeout(o,s||100)}))}e(".dir-filter .select-style select").each((function(){var t=e(this),s=e("<div></div>"),a=e("<select></select>"),i=e("<option></option>");s.html(a),a.html(i),i.html(t.find("option:selected").text()),s.css({position:"absolute",visibility:"hidden",opacity:0}),a.css({width:"auto"}),t.after(s),t.width(a.width());var n=t.val().split(",")[0];t.closest(".select-style").addClass("option-"+n),t.change((function(){i.html(t.find("option:selected").text()),t.width(a.width()),t.closest(".select-style").removeClass("option-"+n),n=t.val().split(",")[0],t.closest(".select-style").addClass("option-"+n),(k=e(".loading-list")).length&&k.addClass("loading")}))}));var h=e("#members-index-swap ul#members-list"),u=e("#members-index-swap ul#members-list li"),m=e(".bp-swap-pagination button.prev"),v=e(".bp-swap-pagination button.next"),b=0,g=e(".bp-swap-pagination .pagination-links").data("max-page"),f=1;if(m.hide().removeClass("d-none"),h.length&&u.length){var _=new Hammer(h.get(0)),w=function(){u[b-1]&&(e(u[b]).hide("drop",{direction:"right"}),e(u[b-1]).show("drop",{direction:"left"}),b--,v.show()),0===b&&m.hide()},y=function(){if(u[b+1]&&(e(u[b+1]).hide().removeClass("d-none"),e(u[b]).hide("drop",{direction:"left"}),e(u[b+1]).show("drop",{direction:"right"}),b++,m.show()),b===u.length-11&&f!==g){var t={action:"load_member_swap_page",page:++f};jQuery.post(grimlock_buddypress.ajax_url,t,(function(t){t.success&&(h.append(t.data),u=e("#members-list li"),v.removeClass("loading"))}))}b+1>=u.length&&(f>=g?v.hide():v.addClass("loading"))};m.on("click",(function(e){e.preventDefault(),w()})),_.on("swiperight",(function(){w()})),v.on("click",(function(e){e.preventDefault(),y()})),_.on("swipeleft",(function(){y()}))}var C=document.getElementById("send-to-input");null!==C&&C.focus();var k=e(".loading-list");k.length&&new MutationObserver((function(){k.hasClass("loading")&&k.removeClass("loading")})).observe(k.get(0),{childList:!0,characterData:!0,subtree:!0});var x=e(".item-list-tabs ul > li"),M=new MutationObserver((function(t){t.forEach((function(t){e(t.target).hasClass("loading")&&(k.addClass("loading"),e("html, body").animate({scrollTop:"0px"},300))}))}));x.each((function(){M.observe(this,{attributes:!0})}));var D=e("#item-header"),O=e("#header-cover-image");if(D.length&&O.length){var E=D.offset().top+D.height(),L=e(window).scrollTop(),T=L<E?1-L/E*1.3:0;O.css({opacity:T}),e(window).on("scroll",(function(){L=e(window).scrollTop(),T=L<E?1-L/E*1.3:0,O.css({opacity:T})}))}e('form[id^="bps_"]').each((function(){e(this).find(".bps-range, .bps-integer-range, .bps-date-range, .bps-range-select").each((function(){var t=e(this).find('select[name$="[min]"]'),s=e(this).find('select[name$="[max]"]'),a=s.find("option");t.change((function(){var i=t.val(),n=s.val();n&&i>n&&s.val(i),a.each((function(){var t=e(this).val();parseInt(i)>parseInt(t)?e(this).hide():e(this).show()}))}))}))}));var j=e(".bps_header .last:not(.bps-btn--grimlock-buddypress)"),W=e(".bps_form-wrapper");j.on("click",(function(){if(W.length){e("body").addClass("ov-h"),W.removeClass("d-none").addClass("d-block"),W.after('<div class="bps_directory_close close_bps"></div>');var t=e(".close_bps");t.on("click",(function(){e("body").removeClass("ov-h"),W.removeClass("d-block").addClass("d-none"),t.remove()}))}})),e(document).on("click",".bps_form-wrapper",(function(t){var s=e(".close_bps");e(t.target).hasClass("bps_form-wrapper")&&(e("body").removeClass("ov-h"),W.removeClass("d-block").addClass("d-none"),s.remove())}));var I=e(".hmk-trigger-match div.hmk-get-percent"),B=new MutationObserver((function(t){t.forEach((function(t){var s=e(t.target);s.html().includes("Please wait")?s.addClass("loading"):s.removeClass("loading");var a=s.find(".hmk-member-match-percent");if(a.length&&!a.find(".hmk-match-value").length){var i=a.html().split("%");25>i[0]?s.addClass("hmk-match-value-lower"):50>i[0]?s.addClass("hmk-match-value-low"):75>i[0]?s.addClass("hmk-match-value-high"):100>=i[0]&&s.addClass("hmk-match-value-higher"),a.html('<span class="hmk-match-value">'+i[0]+'%</span> <span class="hmk-match-text">'+i[1]+"</span>")}}))}));I.each((function(){B.observe(this,{childList:!0,characterData:!0})}));var Q=e("div.group-button"),$=new MutationObserver((function(t){t.forEach((function(t){e(t.target).removeClass("loading")}))}));Q.each((function(){$.observe(this,{childList:!0,characterData:!0})}));var q=e(".bp-card-list--members__item .card-body-actions"),z=new MutationObserver((function(t){t.forEach((function(t){var s=e(t.target).find(".button.accept"),a=e(t.target).find(".button.reject");!s.length&&a.length?e(t.target).closest(".bp-card-list--members__item").addClass("state--accepted"):s.length&&!a.length&&e(t.target).closest(".bp-card-list--members__item").addClass("state--rejected")}))}));q.each((function(){z.observe(this,{childList:!0,characterData:!0})}));var H=e(".thread-star .icon-state"),P=new MutationObserver((function(t){t.forEach((function(t){e(t.target).closest(".thread-star .icon-state").removeClass("loading")}))}));H.each((function(){P.observe(this,{childList:!0,characterData:!0,subtree:!0})})),H.on("click",(function(){e(this).addClass("loading")}));var S=e(".bp-featured-members-button"),A=new MutationObserver((function(t){t.forEach((function(t){e(t.target).closest(".bp-featured-members-button").removeClass("loading")}))}));S.each((function(){A.observe(this,{childList:!0,characterData:!0,subtree:!0})})),S.on("click",(function(){e(this).addClass("loading")})),e(document).on("click",".message-action-star, .message-action-unstar",(function(){e(".icon-state").addClass("loading")})),setTimeout((function(){e(".icon-state").removeClass("loading")}),2e3),e(".bp-messages-wrap").off("mousewheel DOMMouseScroll",".scroll-content"),e(".bp-messages-wrap:not(.bp-better-messages-list)").off("touchstart",".scroll-wrapper");var F=e(".mpp-item-actions a, #mpp-activity-upload-buttons > a, .mpp-upload-container-close, .invitation-actions > a, .notification-actions > a, .bp-member-swipe-card__action > div > a, body.bp-user:not(.grimlock-buddypress--members-actions-text-displayed) #item-buttons > div > a, body.groups.single-item:not(.grimlock-buddypress--groups-actions-text-displayed) #item-buttons > div > a, body:not(.grimlock-buddypress--groups-actions-text-displayed) .bp-card-list--groups__item div.action > div > a, body:not(.grimlock-buddypress--groups-actions-text-displayed) .bp-card-list--groups__item div.action > a, body:not(.grimlock-buddypress--members-actions-text-displayed) .bp-card-list--members__item div.action > div > a, body:not(.grimlock-buddypress--members-actions-text-displayed) .bp-card-list--members__item div.action > a, #rtmedia-add-media-button-post-update, body:not(.grimlock-buddypress--members-actions-text-displayed) .bp-member-swipe-list__item div.action > div > a");F.length&&(F.tooltip({title:function(){return e(this).text()},offset:"0, 5",trigger:"hover",delay:{show:0,hide:0}}),F.on("click",(function(){F.tooltip("hide")}))),e("img.bupr-save-reivew-spinner").after('<span class="bupr-save-reivew-spinner-state"></span>');var G=e(".navbar-nav--buddypress .sub-menu--notifications-list"),J=e(".navbar-nav--buddypress .notifications-count");if(G.length){var K=new MutationObserver((function(){G.text(grimlock_buddypress.notifications_list_empty),J.length&&J.remove(),K.disconnect()}));K.observe(G.get(0),{childList:!0})}e.fn.autocompletebp&&(e.browser={msie:!1})}))})();