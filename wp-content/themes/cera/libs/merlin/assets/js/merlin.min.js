var Merlin=function(f){var d={install_child:function(e){(new n).init(e)},activate_license:function(e){(new i).init(e)},install_plugins:function(e){(new t).init(e)},install_content:function(e){(new o).init(e)}};function e(){var i=f(".merlin__body"),e=(f(".merlin__body--loading"),f(".merlin__body--exiting"),f("#merlin__drawer-trigger"));drawer_opened="merlin__drawer--open",next_link=setTimeout(function(){i.addClass("loaded")},100),e.on("click",function(){i.toggleClass(drawer_opened)}),f(".merlin__button--proceed:not(.merlin__button--closer)").click(function(e){e.preventDefault();var n=this.getAttribute("href");i.addClass("exiting"),setTimeout(function(){window.location=n},400)}),f(".merlin__button--closer").on("click",function(e){i.removeClass(drawer_opened),e.preventDefault();var n=this.getAttribute("href");setTimeout(function(){i.addClass("exiting")},600),setTimeout(function(){window.location=n},1100)}),f(".button-next").on("click",function(e){if(e.preventDefault(),!function(e){var n=jQuery(e);if("yes"==n.data("done-loading"))return!1;n.is("input")||n.is("button");return n.data("done-loading","yes"),n.addClass("merlin__button--loading"),{done:function(){!0,n.attr("disabled",!1)}}}(this))return!1;var n=f(this).data("callback");return!n||void 0===d[n]||(d[n](this),!1)});function n(e,n){var i=f("a.merlin__button--next"),t=new URL(i.attr("href")),o=new URLSearchParams(t.search);o.set(e,n),t.search=o.toString(),i.attr("href",t.href)}f(document).on("change",".js-merlin-demo-import-select",function(){var e=f(this).val();n("demo",e)}),f(document).on("change",".js-merlin-demo-import-use-elementor",function(){n("use-elementor",f(this).is(":checked")?1:0)});function t(){r.hide(),a.hide();var e=f(".import-file-screenshot-"+s.val());e.length?e.show():a.show()}function o(){l.hide(),f(".import-file-warning-"+s.val()).show()}var s=f(".js-merlin-demo-import-select"),r=f(".import-file-screenshot"),a=f(".icon.icon--content"),l=f(".import-file-warning");t(),o(),s.change(function(){t(),o()})}function n(){var n,i=f(".merlin__body"),t=f("#child-theme-text");function o(e){void 0!==e.done?(setTimeout(function(){t.addClass("lead")},0),setTimeout(function(){t.addClass("success"),t.html(e.message)},600),n()):(t.addClass("lead error"),t.html(e.error))}return{init:function(e){n=function(){setTimeout(function(){f(".merlin__body").addClass("js--finished")},1500),i.removeClass(drawer_opened),setTimeout(function(){f(".merlin__body").addClass("exiting")},3500),setTimeout(function(){window.location.href=e.href},4e3)},jQuery.post(merlin_params.ajaxurl,{action:"merlin_child_theme",wpnonce:merlin_params.wpnonce},o).fail(o)}}}function i(){var n,i=f(".merlin__body"),t=f(".merlin__content--license-key"),o=f("#license-text");function s(e){void 0!==e.success&&e.success?(o.siblings(".error-message").remove(),setTimeout(function(){o.addClass("lead")},0),setTimeout(function(){o.addClass("success"),o.html(e.message)},600),n()):(f(".js-merlin-license-activate-button").removeClass("merlin__button--loading").data("done-loading","no"),o.siblings(".error-message").remove(),t.addClass("has-error"),o.html(e.message),o.siblings(".error-message").addClass("lead error"))}return{init:function(e){n=function(){setTimeout(function(){f(".merlin__body").addClass("js--finished")},1500),i.removeClass(drawer_opened),setTimeout(function(){f(".merlin__body").addClass("exiting")},3500),setTimeout(function(){window.location.href=e.href},4e3)},t.removeClass("has-error"),jQuery.post(merlin_params.ajaxurl,{action:"merlin_activate_license",wpnonce:merlin_params.wpnonce,license_key:f(".js-license-key").val()},s).fail(s)}}}function t(){var n,i,t=f(".merlin__body"),o=0,s="",r="";function a(e){var n=i.find("label");"object"==typeof e&&void 0!==e.message?(n.removeClass("installing success error").addClass(e.message.toLowerCase()),void 0!==e.done&&e.done?d():void 0!==e.url?e.hash==r?(n.removeClass("installing success").addClass("error"),d()):(r=e.hash,jQuery.post(e.url,e,a).fail(a)):d()):l()}function l(){s&&(i.find("input:checkbox").is(":checked")?jQuery.post(merlin_params.ajaxurl,{action:"merlin_plugins",wpnonce:merlin_params.wpnonce,slug:s},a).fail(a):(i.addClass("skipping"),setTimeout(d,300)))}function d(){i&&(i.data("done_item")||(o++,i.data("done_item",1)),i.find(".spinner").css("visibility","hidden"));var e=f(".merlin__drawer--install-plugins li");e.each(function(){var e=f(this);return!!e.data("done_item")||(s=e.data("slug"),i=e,l(),!1)}),o>=e.length&&n()}return{init:function(e){f(".merlin__drawer--install-plugins").addClass("installing"),f(".merlin__drawer--install-plugins").find("input").prop("disabled",!0),n=function(){setTimeout(function(){f(".merlin__body").addClass("js--finished")},1e3),t.removeClass(drawer_opened),setTimeout(function(){f(".merlin__body").addClass("exiting")},3e3),setTimeout(function(){window.location.href=e.href},3500)},d()}}}function o(){var i,t,n,o=f(".merlin__body"),s=0,r="",a="",l=1,d=0,c=new URL(window.location.href).searchParams.get("demo")||0;function u(e){var n=t.find("label");"object"==typeof e&&void 0!==e.message?(n.addClass(e.message.toLowerCase()),void 0!==e.num_of_imported_posts&&0<d&&(l="all"===e.num_of_imported_posts?d:e.num_of_imported_posts,_()),void 0!==e.url?e.hash===a?(n.addClass("status--failed"),m()):(a=e.hash,void 0===e.selected_index&&(e.selected_index=c),jQuery.post(e.url,e,u).fail(u)):(e.done,m())):(console.log(e),n.addClass("status--error"),m())}function m(){var e=!1;t&&(t.data("done_item")||(s++,t.data("done_item",1)),t.find(".spinner").css("visibility","hidden"));var n=f(".merlin__drawer--import-content__list-item");f(".merlin__drawer--import-content__list-item input:checked");n.each(function(){""==r||e?(r=f(this).data("content"),t=f(this),r&&(t.find("input:checkbox").is(":checked")?jQuery.post(merlin_params.ajaxurl,{action:"merlin_content",wpnonce:merlin_params.wpnonce,content:r,selected_index:c},u).fail(u):(t.addClass("skipping"),setTimeout(m,300))),e=!1):f(this).data("content")==r&&(e=!0)}),s>=n.length&&i()}function _(){f(".js-merlin-progress-bar").css("width",l/d*100+"%");var e=function(e,n,i){return Math.min(i,Math.max(n,e))}(l/d*100,0,99);f(".js-merlin-progress-bar-percentage").html(Math.round(e)+"%"),1==l/d&&clearInterval(n)}return{init:function(e){f(".merlin__drawer--import-content").addClass("installing"),f(".merlin__drawer--import-content").find("input").prop("disabled",!0),i=function(){f.post(merlin_params.ajaxurl,{action:"merlin_import_finished",wpnonce:merlin_params.wpnonce,selected_index:c}),setTimeout(function(){f(".js-merlin-progress-bar-percentage").html("100%")},100),setTimeout(function(){o.removeClass(drawer_opened)},500),setTimeout(function(){f(".merlin__body").addClass("js--finished")},1500),setTimeout(function(){f(".merlin__body").addClass("exiting")},3400),setTimeout(function(){window.location.href=e.href},4e3)},function(){if(!f(".merlin__drawer--import-content__list-item .checkbox-content").is(":checked"))return;jQuery.post(merlin_params.ajaxurl,{action:"merlin_get_total_content_import_items",wpnonce:merlin_params.wpnonce,selected_index:c},function(e){0<(d=e.data)&&(_(),n=setInterval(function(){l+=d/500,_()},1e3))})}(),m()}}}return{init:function(){this,f(e)},callback:function(e){console.log(e),console.log(this)}}}(jQuery);Merlin.init();